<!DOCTYPE HTML>
<HTML>
<HEAD>
<META CHARSET="UTF-8">
<TITLE>แผนที่ตำแหน่งของฉัน</TITLE>
<SCRIPT SRC="mymodernizr.js"></SCRIPT>
<SCRIPT SRC="http://maps.google.com/maps/api/js?sensor=false&region=TH"></SCRIPT>
<STYLE>
  HTML { height: 100% }
	BODY { height: 100% }
	#map_canvas { width: 70%; height: 70% }
</STYLE>
</HEAD>
<BODY>
คุณอยู่ที่ละติจูด <INPUT TYPE="text" ID="latitudeTxt" SIZE="10"> ลองจิจูด <INPUT TYPE="text" ID="longitudeTxt" SIZE="10"><BR>
<DIV ID="errorLabel" STYLE="color:red"></DIV>
  <BR><BR><DIV ID="map_canvas"></DIV>
<SCRIPT>
function getMyLocation() {
    if (Modernizr.geolocation) {
      navigator.geolocation.getCurrentPosition(successCallbackFunc);
    } else {
       alert("เว็บบราวเซอร์ของคุณไม่รองรับการทำงานของ Geolocation API");
    }
}
function successCallbackFunc(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    var latTxt = document.getElementById("latitudeTxt");
    latTxt.value = latitude;
    var longTxt = document.getElementById("longitudeTxt");
    longTxt.value = longitude;

   var latlng = new google.maps.LatLng(latitude, longitude);
   var myOptions = {
      zoom: 15,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
   };

   map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
   map.setCenter(latlng);

   var marker = new google.maps.Marker({
      map: map, 
      position: latlng,
      title : 'ตำแหน่งปัจจุบัน'
   });

   var contentString = '<DIV>'+'<H3>ตำแหน่งปัจจุบันของคุณ</H3></DIV>';

   var infowindow = new google.maps.InfoWindow({
      content: contentString
   });

   google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
   });
}
getMyLocation();
</SCRIPT>
</BODY>
</HTML>
