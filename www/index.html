<!DOCTYPE HTML>
<HTML>
<HEAD>
  <META CHARSET="UTF-8">
  <TITLE>ตำแหน่งปัจจุบันของฉัน</TITLE>
  <SCRIPT SRC="mymodernizr.js"></SCRIPT>
</HEAD>
<BODY>
<SCRIPT>
var watchId = null;
function traceMyLocation() {
   if (Modernizr.geolocation) {
      watchId = navigator.geolocation.watchPosition(successCallbackFunc, errorCallbackFunc);
   } else {
      alert("เว็บบราวเซอร์ของคุณไม่รองรับการทำงานของ Geolocation API");
   }
}

function successCallbackFunc(position) {
   var latitude = position.coords.latitude;
   var longitude = position.coords.longitude;
   var latTxt = document.getElementById("latitudeTxt");
   latTxt.value = latitude;
   var longTxt = document.getElementById("longitudeTxt");
   longTxt.value = longitude;
}

function errorCallbackFunc(error) {
   var errorDesc = ["เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ", "ผู้ใช้งานไม่อนุญาตให้เปิดเผยตำแหน่งพิกัดปัจจุบัน", "ไม่สามารถค้นหาตำแหน่งพิกัดได้", "Timeout"];
   var errorMsg = errorDesc[error.code];
   var div = document.getElementById("errorLabel");
   div.innerHTML = errorMsg;
}
function stopTracing() {
   if( watchId != null ) {
      navigator.geolocation.clearWatch(watchId);
   }
   var latTxt = document.getElementById("latitudeTxt");
   latTxt.value = "";
   var longTxt = document.getElementById("longitudeTxt");
   longTxt.value = "";
}
</SCRIPT>
<FORM>
คุณอยู่ที่ละติจูด <INPUT TYPE="text" ID="latitudeTxt" SIZE="10"> ลองจิจูด <INPUT TYPE="text" ID="longitudeTxt" SIZE="10"><BR>
<DIV ID="errorLabel" STYLE="color:red"></DIV><BR>
<INPUT TYPE="button" NAME="startBtn" VALUE="ติดตามตำแหน่งปัจจุบัน" ONCLICK="traceMyLocation()">
<INPUT TYPE="button" NAME="stopBtn" VALUE="ยกเลิกติดตามตำแหน่ง" ONCLICK="stopTracing()">
</FORM>
</BODY>
</HTML>
